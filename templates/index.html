<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI HR Interview Assistant</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f2f5;
            color: #333;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .container {
            background-color: #ffffff;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 30px;
            width: 90%;
            max-width: 800px;
        }
        h1, h2 {
            color: #333;
            text-align: center;
            margin-bottom: 20px;
        }
        #emoji-container {
            font-size: 60px;
            text-align: center;
            margin-bottom: 20px;
            height: 80px;
        }
        #chat-container {
            height: 300px;
            overflow-y: auto;
            padding: 20px;
            background-color: #f9f9f9;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        input[type="text"], input[type="email"], input[type="tel"], input[type="file"] {
            width: calc(100% - 22px);
            padding: 12px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 20px;
            font-size: 14px;
        }
        button {
            background-color: #007AFF;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 20px;
            cursor: pointer;
            transition: background-color 0.3s;
            font-size: 14px;
        }
        button:hover {
            background-color: #0056b3;
        }
        #status-indicator {
            text-align: center;
            margin-bottom: 15px;
            font-size: 14px;
            color: #666;
        }
        .message {
            margin-bottom: 10px;
            padding: 10px 15px;
            border-radius: 18px;
            max-width: 80%;
            clear: both;
        }
        .user-message {
            background-color: #007AFF;
            color: white;
            float: right;
        }
        .ai-message {
            background-color: #E9E9EB;
            color: #333;
            float: left;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>AI HR Interview Assistant</h1>
        <div id="emoji-container">üë©‚Äçüíº</div>
        <div id="status-indicator">Please register to start the interview</div>
        <div id="registration-form">
            <h2>Candidate Registration</h2>
            <form id="candidate-form">
                <input type="text" id="full-name" placeholder="Full Name" required>
                <input type="email" id="email" placeholder="Email" required>
                <input type="tel" id="phone" placeholder="Phone Number">
                <input type="hidden" id="job-title" value="{{ job_title }}">
                <input type="file" id="cv-file" accept=".pdf" required>
                <button type="submit">Register and Start Interview</button>
            </form>
        </div>
        <div id="interview-area" style="display: none;">
            <div id="chat-container"></div>
            <input type="text" id="user-input" placeholder="Type your message...">
            <button id="send-message">Send</button>
            <button id="voice-input">Voice Input</button>
        </div>
    </div>

    <script>
        let currentSessionId = '{{ session_id }}';
        let currentJobTitle = '{{ job_title }}';
        let currentCandidateId = '{{ candidate_id }}';

        function updateEmoji(state) {
            const emoji = document.getElementById('emoji-container');
            switch(state) {
                case 'ready':
                    emoji.innerHTML = 'üë©‚Äçüíº';
                    break;
                case 'listening':
                    emoji.innerHTML = 'üëÇ';
                    break;
                case 'thinking':
                    emoji.innerHTML = 'ü§î';
                    break;
                case 'speaking':
                    emoji.innerHTML = 'üó£Ô∏è';
                    break;
                default:
                    emoji.innerHTML = 'üë©‚Äçüíº';
            }
        }

        function addMessage(sender, message) {
            const messageClass = sender === 'You' ? 'user-message' : 'ai-message';
            $('#chat-container').append(`<div class="message ${messageClass}"><strong>${sender}:</strong> ${message}</div>`);
            $('#chat-container').scrollTop($('#chat-container')[0].scrollHeight);
        }

        function playAudio(base64Audio) {
            const audio = new Audio("data:audio/mp3;base64," + base64Audio);
            audio.play();
            updateEmoji('speaking');
            $('#status-indicator').text('AI Assistant is speaking');

            audio.onended = function() {
                updateEmoji('ready');
                $('#status-indicator').text('AI Assistant is ready');
            };
        }

        $('#candidate-form').submit(function(e) {
            e.preventDefault();
            const formData = new FormData();
            formData.append('full_name', $('#full-name').val());
            formData.append('email', $('#email').val());
            formData.append('phone', $('#phone').val());
            formData.append('job_title', $('#job-title').val());
            formData.append('cv', $('#cv-file')[0].files[0]);

            $.ajax({
                url: '/register_candidate',
                type: 'POST',
                data: formData,
                processData: false,
                contentType: false,
                success: function(data) {
                    currentSessionId = data.session_id;
                    currentCandidateId = data.candidate_id;
                    $('#registration-form').hide();
                    $('#interview-area').show();
                    startInterview();
                },
                error: function(jqXHR, textStatus, errorThrown) {
                    let errorMessage = 'Error registering candidate';
                    if (jqXHR.responseJSON && jqXHR.responseJSON.error) {
                        errorMessage = jqXHR.responseJSON.error;
                    }
                    alert(errorMessage);
                    console.error('Registration error:', errorMessage);
                }
            });
        });

        function startInterview() {
            updateEmoji('thinking');
            $('#status-indicator').text('Starting interview...');
            $.post('/start_interview', {
                session_id: currentSessionId,
                job_title: currentJobTitle,
                candidate_id: currentCandidateId
            }, function(data) {
                addMessage('AI', data.message);
                if (data.audio) {
                    playAudio(data.audio);
                } else {
                    updateEmoji('ready');
                    $('#status-indicator').text('AI Assistant is ready');
                }
            }).fail(function() {
                alert('Error starting interview');
            });
        }

        $('#send-message').click(function() {
            const message = $('#user-input').val();
            if (message.trim() !== '') {
                addMessage('You', message);
                updateEmoji('thinking');
                $('#status-indicator').text('AI Assistant is thinking...');
                $.post('/send_message', {
                    message: message,
                    session_id: currentSessionId
                }, function(data) {
                    addMessage('AI', data.message);
                    if (data.audio) {
                        playAudio(data.audio);
                    } else {
                        updateEmoji('ready');
                        $('#status-indicator').text('AI Assistant is ready');
                    }
                    if (data.interview_completed) {
                        $('#user-input').prop('disabled', true);
                        $('#send-message').prop('disabled', true);
                        $('#voice-input').prop('disabled', true);
                        $('#status-indicator').text('Interview completed');
                    }
                });
                $('#user-input').val('');
            }
        });

        $('#user-input').keypress(function(e) {
            if (e.which == 13) {
                $('#send-message').click();
            }
        });

        $('#voice-input').click(function() {
            if ('webkitSpeechRecognition' in window) {
                const recognition = new webkitSpeechRecognition();
                recognition.lang = 'en-US';
                recognition.start();
                updateEmoji('listening');
                $('#status-indicator').text('Listening...');

                recognition.onresult = function(event) {
                    const transcript = event.results[0][0].transcript;
                    $('#user-input').val(transcript);
                    updateEmoji('ready');
                    $('#status-indicator').text('AI Assistant is ready');
                };

                recognition.onerror = function(event) {
                    console.error('Speech recognition error', event.error);
                    updateEmoji('ready');
                    $('#status-indicator').text('Speech recognition error');
                };
            } else {
                alert('Speech recognition is not supported in this browser.');
            }
        });
    </script>
</body>
</html>
















































<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>AI HR Interview Assistant</title>-->
<!--    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>-->
<!--    <style>-->
<!--        body {-->
<!--            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;-->
<!--            background-color: #f0f2f5;-->
<!--            color: #333;-->
<!--            margin: 0;-->
<!--            padding: 0;-->
<!--            display: flex;-->
<!--            justify-content: center;-->
<!--            align-items: center;-->
<!--            min-height: 100vh;-->
<!--        }-->
<!--        .container {-->
<!--            background-color: #ffffff;-->
<!--            border-radius: 10px;-->
<!--            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);-->
<!--            padding: 30px;-->
<!--            width: 90%;-->
<!--            max-width: 800px;-->
<!--        }-->
<!--        h1, h2 {-->
<!--            color: #333;-->
<!--            text-align: center;-->
<!--            margin-bottom: 20px;-->
<!--        }-->
<!--        #emoji-container {-->
<!--            font-size: 60px;-->
<!--            text-align: center;-->
<!--            margin-bottom: 20px;-->
<!--            height: 80px;-->
<!--        }-->
<!--        #chat-container {-->
<!--            height: 300px;-->
<!--            overflow-y: auto;-->
<!--            padding: 20px;-->
<!--            background-color: #f9f9f9;-->
<!--            border-radius: 10px;-->
<!--            margin-bottom: 20px;-->
<!--        }-->
<!--        input[type="text"], input[type="email"], input[type="tel"], input[type="file"] {-->
<!--            width: calc(100% - 22px);-->
<!--            padding: 12px;-->
<!--            margin-bottom: 10px;-->
<!--            border: 1px solid #ddd;-->
<!--            border-radius: 20px;-->
<!--            font-size: 14px;-->
<!--        }-->
<!--        button {-->
<!--            background-color: #007AFF;-->
<!--            color: white;-->
<!--            border: none;-->
<!--            padding: 10px 20px;-->
<!--            margin: 5px;-->
<!--            border-radius: 20px;-->
<!--            cursor: pointer;-->
<!--            transition: background-color 0.3s;-->
<!--            font-size: 14px;-->
<!--        }-->
<!--        button:hover {-->
<!--            background-color: #0056b3;-->
<!--        }-->
<!--        #status-indicator {-->
<!--            text-align: center;-->
<!--            margin-bottom: 15px;-->
<!--            font-size: 14px;-->
<!--            color: #666;-->
<!--        }-->
<!--        .message {-->
<!--            margin-bottom: 10px;-->
<!--            padding: 10px 15px;-->
<!--            border-radius: 18px;-->
<!--            max-width: 80%;-->
<!--            clear: both;-->
<!--        }-->
<!--        .user-message {-->
<!--            background-color: #007AFF;-->
<!--            color: white;-->
<!--            float: right;-->
<!--        }-->
<!--        .ai-message {-->
<!--            background-color: #E9E9EB;-->
<!--            color: #333;-->
<!--            float: left;-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->
<!--    <div class="container">-->
<!--        <h1>AI HR Interview Assistant</h1>-->
<!--        <div id="emoji-container">üë©‚Äçüíº</div>-->
<!--        <div id="status-indicator">Please register to start the interview</div>-->
<!--        <div id="registration-form">-->
<!--            <h2>Candidate Registration</h2>-->
<!--            <form id="candidate-form">-->
<!--                <input type="text" id="full-name" placeholder="Full Name" required>-->
<!--                <input type="email" id="email" placeholder="Email" required>-->
<!--                <input type="tel" id="phone" placeholder="Phone (optional)">-->
<!--                <input type="hidden" id="job-title" value="{{ job_title }}">-->
<!--                <input type="file" id="cv-file" accept=".pdf" required>-->
<!--                <button type="submit">Register and Start Interview</button>-->
<!--            </form>-->
<!--        </div>-->
<!--        <div id="interview-area" style="display: none;">-->
<!--            <div id="chat-container"></div>-->
<!--            <input type="text" id="user-input" placeholder="Type your message...">-->
<!--            <button id="send-message">Send</button>-->
<!--            <button id="voice-input">Voice Input</button>-->
<!--        </div>-->
<!--    </div>-->

<!--    <script>-->
<!--        let currentSessionId = '{{ session_id }}';-->
<!--        let currentJobTitle = '{{ job_title }}';-->
<!--        let currentCandidateId = '{{ candidate_id }}';-->

<!--        function updateEmoji(state) {-->
<!--            const emoji = document.getElementById('emoji-container');-->
<!--            switch(state) {-->
<!--                case 'ready':-->
<!--                    emoji.innerHTML = 'üë©‚Äçüíº';-->
<!--                    break;-->
<!--                case 'listening':-->
<!--                    emoji.innerHTML = 'üëÇ';-->
<!--                    break;-->
<!--                case 'thinking':-->
<!--                    emoji.innerHTML = 'ü§î';-->
<!--                    break;-->
<!--                case 'speaking':-->
<!--                    emoji.innerHTML = 'üó£Ô∏è';-->
<!--                    break;-->
<!--                default:-->
<!--                    emoji.innerHTML = 'üë©‚Äçüíº';-->
<!--            }-->
<!--        }-->

<!--        function addMessage(sender, message) {-->
<!--            const messageClass = sender === 'You' ? 'user-message' : 'ai-message';-->
<!--            $('#chat-container').append(`<div class="message ${messageClass}"><strong>${sender}:</strong> ${message}</div>`);-->
<!--            $('#chat-container').scrollTop($('#chat-container')[0].scrollHeight);-->
<!--        }-->

<!--        function playAudio(base64Audio) {-->
<!--            const audio = new Audio("data:audio/mp3;base64," + base64Audio);-->
<!--            audio.play();-->
<!--            updateEmoji('speaking');-->
<!--            $('#status-indicator').text('AI Assistant is speaking');-->

<!--            audio.onended = function() {-->
<!--                updateEmoji('ready');-->
<!--                $('#status-indicator').text('AI Assistant is ready');-->
<!--            };-->
<!--        }-->

<!--        $('#candidate-form').submit(function(e) {-->
<!--            e.preventDefault();-->
<!--            const formData = new FormData();-->
<!--            formData.append('full_name', $('#full-name').val());-->
<!--            formData.append('email', $('#email').val());-->
<!--            formData.append('phone', $('#phone').val());-->
<!--            formData.append('job_title', $('#job-title').val());-->
<!--            formData.append('cv', $('#cv-file')[0].files[0]);-->

<!--            $.ajax({-->
<!--                url: '/register_candidate',-->
<!--                type: 'POST',-->
<!--                data: formData,-->
<!--                processData: false,-->
<!--                contentType: false,-->
<!--                success: function(data) {-->
<!--                    currentSessionId = data.session_id;-->
<!--                    currentCandidateId = data.candidate_id;-->
<!--                    $('#registration-form').hide();-->
<!--                    $('#interview-area').show();-->
<!--                    startInterview();-->
<!--                },-->
<!--                error: function(jqXHR, textStatus, errorThrown) {-->
<!--                    let errorMessage = 'Error registering candidate';-->
<!--                    if (jqXHR.responseJSON && jqXHR.responseJSON.error) {-->
<!--                        errorMessage = jqXHR.responseJSON.error;-->
<!--                    }-->
<!--                    alert(errorMessage);-->
<!--                    console.error('Registration error:', errorMessage);-->
<!--                }-->
<!--            });-->
<!--        });-->

<!--        function startInterview() {-->
<!--            updateEmoji('thinking');-->
<!--            $('#status-indicator').text('Starting interview...');-->
<!--            $.post('/start_interview', {-->
<!--                session_id: currentSessionId,-->
<!--                job_title: currentJobTitle,-->
<!--                candidate_id: currentCandidateId-->
<!--            }, function(data) {-->
<!--                addMessage('AI', data.message);-->
<!--                if (data.audio) {-->
<!--                    playAudio(data.audio);-->
<!--                } else {-->
<!--                    updateEmoji('ready');-->
<!--                    $('#status-indicator').text('AI Assistant is ready');-->
<!--                }-->
<!--            }).fail(function() {-->
<!--                alert('Error starting interview');-->
<!--            });-->
<!--        }-->

<!--        $('#send-message').click(function() {-->
<!--            const message = $('#user-input').val();-->
<!--            if (message.trim() !== '') {-->
<!--                addMessage('You', message);-->
<!--                updateEmoji('thinking');-->
<!--                $('#status-indicator').text('AI Assistant is thinking...');-->
<!--                $.post('/send_message', {-->
<!--                    message: message,-->
<!--                    session_id: currentSessionId-->
<!--                }, function(data) {-->
<!--                    addMessage('AI', data.message);-->
<!--                    if (data.audio) {-->
<!--                        playAudio(data.audio);-->
<!--                    } else {-->
<!--                        updateEmoji('ready');-->
<!--                        $('#status-indicator').text('AI Assistant is ready');-->
<!--                    }-->
<!--                    if (data.interview_completed) {-->
<!--                        $('#user-input').prop('disabled', true);-->
<!--                        $('#send-message').prop('disabled', true);-->
<!--                        $('#voice-input').prop('disabled', true);-->
<!--                        $('#status-indicator').text('Interview completed');-->
<!--                    }-->
<!--                });-->
<!--                $('#user-input').val('');-->
<!--            }-->
<!--        });-->

<!--        $('#user-input').keypress(function(e) {-->
<!--            if (e.which == 13) {-->
<!--                $('#send-message').click();-->
<!--            }-->
<!--        });-->

<!--        $('#voice-input').click(function() {-->
<!--            if ('webkitSpeechRecognition' in window) {-->
<!--                const recognition = new webkitSpeechRecognition();-->
<!--                recognition.lang = 'en-US';-->
<!--                recognition.start();-->
<!--                updateEmoji('listening');-->
<!--                $('#status-indicator').text('Listening...');-->

<!--                recognition.onresult = function(event) {-->
<!--                    const transcript = event.results[0][0].transcript;-->
<!--                    $('#user-input').val(transcript);-->
<!--                    updateEmoji('ready');-->
<!--                    $('#status-indicator').text('AI Assistant is ready');-->
<!--                };-->

<!--                recognition.onerror = function(event) {-->
<!--                    console.error('Speech recognition error', event.error);-->
<!--                    updateEmoji('ready');-->
<!--                    $('#status-indicator').text('Speech recognition error');-->
<!--                };-->
<!--            } else {-->
<!--                alert('Speech recognition is not supported in this browser.');-->
<!--            }-->
<!--        });-->
<!--    </script>-->
<!--</body>-->
<!--</html>-->



































































































<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>AI HR Interview Assistant</title>-->
<!--    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>-->
<!--    <style>-->
<!--        body {-->
<!--            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;-->
<!--            background-color: #f0f2f5;-->
<!--            color: #333;-->
<!--            margin: 0;-->
<!--            padding: 0;-->
<!--            display: flex;-->
<!--            justify-content: center;-->
<!--            align-items: center;-->
<!--            min-height: 100vh;-->
<!--        }-->
<!--        .container {-->
<!--            background-color: #ffffff;-->
<!--            border-radius: 10px;-->
<!--            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);-->
<!--            padding: 30px;-->
<!--            width: 90%;-->
<!--            max-width: 800px;-->
<!--        }-->
<!--        h1, h2 {-->
<!--            color: #333;-->
<!--            text-align: center;-->
<!--            margin-bottom: 20px;-->
<!--        }-->
<!--        #emoji-container {-->
<!--            font-size: 60px;-->
<!--            text-align: center;-->
<!--            margin-bottom: 20px;-->
<!--            height: 80px;-->
<!--        }-->
<!--        #chat-container {-->
<!--            height: 300px;-->
<!--            overflow-y: auto;-->
<!--            padding: 20px;-->
<!--            background-color: #f9f9f9;-->
<!--            border-radius: 10px;-->
<!--            margin-bottom: 20px;-->
<!--        }-->
<!--        input[type="text"], input[type="email"], input[type="tel"], input[type="file"] {-->
<!--            width: calc(100% - 22px);-->
<!--            padding: 12px;-->
<!--            margin-bottom: 10px;-->
<!--            border: 1px solid #ddd;-->
<!--            border-radius: 20px;-->
<!--            font-size: 14px;-->
<!--        }-->
<!--        button {-->
<!--            background-color: #007AFF;-->
<!--            color: white;-->
<!--            border: none;-->
<!--            padding: 10px 20px;-->
<!--            margin: 5px;-->
<!--            border-radius: 20px;-->
<!--            cursor: pointer;-->
<!--            transition: background-color 0.3s;-->
<!--            font-size: 14px;-->
<!--        }-->
<!--        button:hover {-->
<!--            background-color: #0056b3;-->
<!--        }-->
<!--        #status-indicator {-->
<!--            text-align: center;-->
<!--            margin-bottom: 15px;-->
<!--            font-size: 14px;-->
<!--            color: #666;-->
<!--        }-->
<!--        .message {-->
<!--            margin-bottom: 10px;-->
<!--            padding: 10px 15px;-->
<!--            border-radius: 18px;-->
<!--            max-width: 80%;-->
<!--            clear: both;-->
<!--        }-->
<!--        .user-message {-->
<!--            background-color: #007AFF;-->
<!--            color: white;-->
<!--            float: right;-->
<!--        }-->
<!--        .ai-message {-->
<!--            background-color: #E9E9EB;-->
<!--            color: #333;-->
<!--            float: left;-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->
<!--    <div class="container">-->
<!--        <h1>AI HR Interview Assistant</h1>-->
<!--        <div id="emoji-container">üë©‚Äçüíº</div>-->
<!--        <div id="status-indicator">Please register to start the interview</div>-->
<!--        <div id="registration-form">-->
<!--            <h2>Candidate Registration</h2>-->
<!--            <form id="candidate-form">-->
<!--                <input type="text" id="full-name" placeholder="Full Name" required>-->
<!--                <input type="email" id="email" placeholder="Email" required>-->
<!--                <input type="tel" id="phone" placeholder="Phone (optional)">-->
<!--                <input type="hidden" id="job-title" value="{{ job_title }}">-->
<!--                <input type="file" id="cv-file" accept=".pdf" required>-->
<!--                <button type="submit">Register and Start Interview</button>-->
<!--            </form>-->
<!--        </div>-->
<!--        <div id="interview-area" style="display: none;">-->
<!--            <div id="chat-container"></div>-->
<!--            <input type="text" id="user-input" placeholder="Type your message...">-->
<!--            <button id="send-message">Send</button>-->
<!--            <button id="voice-input">Voice Input</button>-->
<!--        </div>-->
<!--    </div>-->

<!--    <script>-->
<!--        let currentSessionId = '{{ session_id }}';-->
<!--        let currentJobTitle = '{{ job_title }}';-->
<!--        let currentCandidateId = '{{ candidate_id }}';-->

<!--        function updateEmoji(state) {-->
<!--            const emoji = document.getElementById('emoji-container');-->
<!--            switch(state) {-->
<!--                case 'ready':-->
<!--                    emoji.innerHTML = 'üë©‚Äçüíº';-->
<!--                    break;-->
<!--                case 'listening':-->
<!--                    emoji.innerHTML = 'üëÇ';-->
<!--                    break;-->
<!--                case 'thinking':-->
<!--                    emoji.innerHTML = 'ü§î';-->
<!--                    break;-->
<!--                case 'speaking':-->
<!--                    emoji.innerHTML = 'üó£Ô∏è';-->
<!--                    break;-->
<!--                default:-->
<!--                    emoji.innerHTML = 'üë©‚Äçüíº';-->
<!--            }-->
<!--        }-->

<!--        function addMessage(sender, message) {-->
<!--            const messageClass = sender === 'You' ? 'user-message' : 'ai-message';-->
<!--            $('#chat-container').append(`<div class="message ${messageClass}"><strong>${sender}:</strong> ${message}</div>`);-->
<!--            $('#chat-container').scrollTop($('#chat-container')[0].scrollHeight);-->
<!--        }-->

<!--        function playAudio(base64Audio) {-->
<!--            const audio = new Audio("data:audio/mp3;base64," + base64Audio);-->
<!--            audio.play();-->
<!--            updateEmoji('speaking');-->
<!--            $('#status-indicator').text('AI Assistant is speaking');-->

<!--            audio.onended = function() {-->
<!--                updateEmoji('ready');-->
<!--                $('#status-indicator').text('AI Assistant is ready');-->
<!--            };-->
<!--        }-->

<!--        $('#candidate-form').submit(function(e) {-->
<!--            e.preventDefault();-->
<!--            const formData = new FormData();-->
<!--            formData.append('full_name', $('#full-name').val());-->
<!--            formData.append('email', $('#email').val());-->
<!--            formData.append('phone', $('#phone').val());-->
<!--            formData.append('job_title', $('#job-title').val());-->
<!--            formData.append('cv', $('#cv-file')[0].files[0]);-->

<!--            $.ajax({-->
<!--                url: '/register_candidate',-->
<!--                type: 'POST',-->
<!--                data: formData,-->
<!--                processData: false,-->
<!--                contentType: false,-->
<!--                success: function(data) {-->
<!--                    currentSessionId = data.session_id;-->
<!--                    currentCandidateId = data.candidate_id;-->
<!--                    $('#registration-form').hide();-->
<!--                    $('#interview-area').show();-->
<!--                    startInterview();-->
<!--                },-->
<!--                error: function(jqXHR, textStatus, errorThrown) {-->
<!--                    let errorMessage = 'Error registering candidate';-->
<!--                    if (jqXHR.responseJSON && jqXHR.responseJSON.error) {-->
<!--                        errorMessage = jqXHR.responseJSON.error;-->
<!--                    }-->
<!--                    alert(errorMessage);-->
<!--                    console.error('Registration error:', errorMessage);-->
<!--                }-->
<!--            });-->
<!--        });-->

<!--        function startInterview() {-->
<!--            updateEmoji('thinking');-->
<!--            $('#status-indicator').text('Starting interview...');-->
<!--            $.post('/start_interview', {-->
<!--                session_id: currentSessionId,-->
<!--                job_title: currentJobTitle,-->
<!--                candidate_id: currentCandidateId-->
<!--            }, function(data) {-->
<!--                addMessage('AI', data.message);-->
<!--                if (data.audio) {-->
<!--                    playAudio(data.audio);-->
<!--                } else {-->
<!--                    updateEmoji('ready');-->
<!--                    $('#status-indicator').text('AI Assistant is ready');-->
<!--                }-->
<!--            }).fail(function() {-->
<!--                alert('Error starting interview');-->
<!--            });-->
<!--        }-->

<!--        $('#send-message').click(function() {-->
<!--            const message = $('#user-input').val();-->
<!--            if (message.trim() !== '') {-->
<!--                addMessage('You', message);-->
<!--                updateEmoji('thinking');-->
<!--                $('#status-indicator').text('AI Assistant is thinking...');-->
<!--                $.post('/send_message', {-->
<!--                    message: message,-->
<!--                    session_id: currentSessionId-->
<!--                }, function(data) {-->
<!--                    addMessage('AI', data.message);-->
<!--                    if (data.audio) {-->
<!--                        playAudio(data.audio);-->
<!--                    } else {-->
<!--                        updateEmoji('ready');-->
<!--                        $('#status-indicator').text('AI Assistant is ready');-->
<!--                    }-->
<!--                    if (data.interview_completed) {-->
<!--                        $('#user-input').prop('disabled', true);-->
<!--                        $('#send-message').prop('disabled', true);-->
<!--                        $('#voice-input').prop('disabled', true);-->
<!--                        $('#status-indicator').text('Interview completed');-->
<!--                    }-->
<!--                });-->
<!--                $('#user-input').val('');-->
<!--            }-->
<!--        });-->

<!--        $('#user-input').keypress(function(e) {-->
<!--            if (e.which == 13) {-->
<!--                $('#send-message').click();-->
<!--            }-->
<!--        });-->

<!--        $('#voice-input').click(function() {-->
<!--            if ('webkitSpeechRecognition' in window) {-->
<!--                const recognition = new webkitSpeechRecognition();-->
<!--                recognition.lang = 'en-US';-->
<!--                recognition.start();-->
<!--                updateEmoji('listening');-->
<!--                $('#status-indicator').text('Listening...');-->

<!--                recognition.onresult = function(event) {-->
<!--                    const transcript = event.results[0][0].transcript;-->
<!--                    $('#user-input').val(transcript);-->
<!--                    updateEmoji('ready');-->
<!--                    $('#status-indicator').text('AI Assistant is ready');-->
<!--                };-->

<!--                recognition.onerror = function(event) {-->
<!--                    console.error('Speech recognition error', event.error);-->
<!--                    updateEmoji('ready');-->
<!--                    $('#status-indicator').text('Speech recognition error');-->
<!--                };-->
<!--            } else {-->
<!--                alert('Speech recognition is not supported in this browser.');-->
<!--            }-->
<!--        });-->
<!--    </script>-->
<!--</body>-->
<!--</html>-->




































































































<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>AI HR Interview Assistant</title>-->
<!--    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>-->
<!--    <style>-->
<!--        body {-->
<!--            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;-->
<!--            background-color: #f0f2f5;-->
<!--            color: #333;-->
<!--            margin: 0;-->
<!--            padding: 0;-->
<!--            display: flex;-->
<!--            justify-content: center;-->
<!--            align-items: center;-->
<!--            min-height: 100vh;-->
<!--        }-->
<!--        .container {-->
<!--            background-color: #ffffff;-->
<!--            border-radius: 10px;-->
<!--            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);-->
<!--            padding: 30px;-->
<!--            width: 90%;-->
<!--            max-width: 800px;-->
<!--        }-->
<!--        h1 {-->
<!--            color: #333;-->
<!--            text-align: center;-->
<!--            margin-bottom: 20px;-->
<!--            font-size: 24px;-->
<!--        }-->
<!--        #emoji-container {-->
<!--            font-size: 60px;-->
<!--            text-align: center;-->
<!--            margin-bottom: 20px;-->
<!--            height: 80px;-->
<!--        }-->
<!--        #chat-container {-->
<!--            height: 300px;-->
<!--            overflow-y: auto;-->
<!--            padding: 20px;-->
<!--            background-color: #f9f9f9;-->
<!--            border-radius: 10px;-->
<!--            margin-bottom: 20px;-->
<!--        }-->
<!--        #user-input {-->
<!--            width: calc(100% - 22px);-->
<!--            padding: 12px;-->
<!--            margin-bottom: 10px;-->
<!--            border: 1px solid #ddd;-->
<!--            border-radius: 20px;-->
<!--            font-size: 14px;-->
<!--        }-->
<!--        button {-->
<!--            background-color: #007AFF;-->
<!--            color: white;-->
<!--            border: none;-->
<!--            padding: 10px 20px;-->
<!--            margin: 5px;-->
<!--            border-radius: 20px;-->
<!--            cursor: pointer;-->
<!--            transition: background-color 0.3s;-->
<!--            font-size: 14px;-->
<!--        }-->
<!--        button:hover {-->
<!--            background-color: #0056b3;-->
<!--        }-->
<!--        #upload-area {-->
<!--            margin-bottom: 20px;-->
<!--            text-align: center;-->
<!--        }-->
<!--        .message {-->
<!--            margin-bottom: 10px;-->
<!--            padding: 10px 15px;-->
<!--            border-radius: 18px;-->
<!--            max-width: 80%;-->
<!--            clear: both;-->
<!--        }-->
<!--        .user-message {-->
<!--            background-color: #007AFF;-->
<!--            color: white;-->
<!--            float: right;-->
<!--        }-->
<!--        .ai-message {-->
<!--            background-color: #E9E9EB;-->
<!--            color: #333;-->
<!--            float: left;-->
<!--        }-->
<!--        #status-indicator {-->
<!--            text-align: center;-->
<!--            margin-bottom: 15px;-->
<!--            font-size: 14px;-->
<!--            color: #666;-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->
<!--    <div class="container">-->
<!--        <h1>AI HR Interview Assistant</h1>-->
<!--        <div id="emoji-container">üë©‚Äçüíº</div>-->
<!--        <div id="status-indicator">AI Assistant is ready</div>-->
<!--        <div id="upload-area">-->
<!--            <input type="text" id="job-title" placeholder="Enter Job Title">-->
<!--            <button id="start-interview">Start Interview</button>-->
<!--        </div>-->
<!--        <div id="chat-container"></div>-->
<!--        <input type="text" id="user-input" placeholder="Type your message...">-->
<!--        <button id="send-message">Send</button>-->
<!--        <button id="voice-input">Voice Input</button>-->
<!--        <button id="generate-report" style="display: none;">Generate Report</button>-->
<!--    </div>-->

<!--    <script>-->
<!--        let currentSessionId = null;-->
<!--        let currentJobTitle = null;-->

<!--        function updateEmoji(state) {-->
<!--            const emoji = document.getElementById('emoji-container');-->
<!--            switch(state) {-->
<!--                case 'ready':-->
<!--                    emoji.innerHTML = 'üë©‚Äçüíº';-->
<!--                    break;-->
<!--                case 'listening':-->
<!--                    emoji.innerHTML = 'üëÇ';-->
<!--                    break;-->
<!--                case 'thinking':-->
<!--                    emoji.innerHTML = 'ü§î';-->
<!--                    break;-->
<!--                case 'speaking':-->
<!--                    emoji.innerHTML = 'üó£Ô∏è';-->
<!--                    break;-->
<!--                case 'upload':-->
<!--                    emoji.innerHTML = 'üìÅ';-->
<!--                    break;-->
<!--                default:-->
<!--                    emoji.innerHTML = 'üë©‚Äçüíº';-->
<!--            }-->
<!--        }-->

<!--        function addMessage(sender, message) {-->
<!--            const messageClass = sender === 'You' ? 'user-message' : 'ai-message';-->
<!--            $('#chat-container').append(`<div class="message ${messageClass}"><strong>${sender}:</strong> ${message}</div>`);-->
<!--            $('#chat-container').scrollTop($('#chat-container')[0].scrollHeight);-->
<!--        }-->

<!--        function playAudio(base64Audio) {-->
<!--            const audio = new Audio("data:audio/mp3;base64," + base64Audio);-->
<!--            audio.play();-->
<!--            updateEmoji('speaking');-->
<!--            $('#status-indicator').text('AI Assistant is speaking');-->

<!--            audio.onended = function() {-->
<!--                updateEmoji('ready');-->
<!--                $('#status-indicator').text('AI Assistant is ready');-->
<!--            };-->
<!--        }-->

<!--        $('#start-interview').click(function() {-->
<!--            currentJobTitle = $('#job-title').val();-->
<!--            if (!currentJobTitle) {-->
<!--                alert('Please enter a job title');-->
<!--                return;-->
<!--            }-->

<!--            updateEmoji('thinking');-->
<!--            $('#status-indicator').text('Starting interview...');-->
<!--            $.post(`/start_new_interview/${currentJobTitle}`, function(data) {-->
<!--                if (data.interview_url && data.session_id) {-->
<!--                    currentSessionId = data.session_id;-->
<!--                    startInterview(currentSessionId, currentJobTitle);-->
<!--                } else {-->
<!--                    alert('Error starting new interview');-->
<!--                }-->
<!--            }).fail(function() {-->
<!--                alert('Error starting new interview');-->
<!--            });-->
<!--        });-->

<!--        function startInterview(sessionId, jobTitle) {-->
<!--            $.post('/start_interview', { session_id: sessionId, job_title: jobTitle }, function(data) {-->
<!--                addMessage('AI', data.message);-->
<!--                if (data.audio) {-->
<!--                    playAudio(data.audio);-->
<!--                } else {-->
<!--                    updateEmoji('ready');-->
<!--                    $('#status-indicator').text('AI Assistant is ready');-->
<!--                }-->
<!--            }).fail(function() {-->
<!--                alert('Error starting interview');-->
<!--            });-->
<!--        }-->

<!--        $('#send-message').click(function() {-->
<!--            const message = $('#user-input').val();-->
<!--            if (message.trim() !== '') {-->
<!--                addMessage('You', message);-->
<!--                updateEmoji('thinking');-->
<!--                $('#status-indicator').text('AI Assistant is thinking...');-->
<!--                $.post('/send_message', {message: message, session_id: currentSessionId}, function(data) {-->
<!--                    addMessage('AI', data.message);-->
<!--                    if (data.audio) {-->
<!--                        playAudio(data.audio);-->
<!--                    } else {-->
<!--                        updateEmoji('ready');-->
<!--                        $('#status-indicator').text('AI Assistant is ready');-->
<!--                    }-->
<!--                    if (data.interview_completed) {-->
<!--                        $('#generate-report').show();-->
<!--                    }-->
<!--                });-->
<!--                $('#user-input').val('');-->
<!--            }-->
<!--        });-->

<!--        $('#user-input').keypress(function(e) {-->
<!--            if (e.which == 13) {-->
<!--                $('#send-message').click();-->
<!--            }-->
<!--        });-->

<!--        $('#voice-input').click(function() {-->
<!--            if ('webkitSpeechRecognition' in window) {-->
<!--                const recognition = new webkitSpeechRecognition();-->
<!--                recognition.lang = 'en-US';-->
<!--                recognition.start();-->
<!--                updateEmoji('listening');-->
<!--                $('#status-indicator').text('Listening...');-->

<!--                recognition.onresult = function(event) {-->
<!--                    const transcript = event.results[0][0].transcript;-->
<!--                    $('#user-input').val(transcript);-->
<!--                    updateEmoji('ready');-->
<!--                    $('#status-indicator').text('AI Assistant is ready');-->
<!--                };-->

<!--                recognition.onerror = function(event) {-->
<!--                    console.error('Speech recognition error', event.error);-->
<!--                    updateEmoji('ready');-->
<!--                    $('#status-indicator').text('Speech recognition error');-->
<!--                };-->
<!--            } else {-->
<!--                alert('Speech recognition is not supported in this browser.');-->
<!--            }-->
<!--        });-->

<!--        $('#generate-report').click(function() {-->
<!--            updateEmoji('thinking');-->
<!--            $('#status-indicator').text('Generating report...');-->
<!--            $.post('/generate_report', { session_id: currentSessionId }, function(data) {-->
<!--                if (data.report) {-->
<!--                    addMessage('System', 'Report generated successfully.');-->
<!--                    addMessage('System', 'Report content: ' + data.report);-->

<!--                    // Create download link-->
<!--                    var downloadLink = $('<a>', {-->
<!--                        text: 'Download Report',-->
<!--                        href: `/download_report/${currentJobTitle}/${data.report_filename}`,-->
<!--                        download: data.report_filename-->
<!--                    });-->
<!--                    $('#chat-container').append(downloadLink);-->

<!--                    updateEmoji('ready');-->
<!--                    $('#status-indicator').text('Report generated');-->

<!--                    if (data.audio) {-->
<!--                        playAudio(data.audio);-->
<!--                    }-->
<!--                } else {-->
<!--                    addMessage('System', 'Error generating report. Please try again.');-->
<!--                    updateEmoji('ready');-->
<!--                    $('#status-indicator').text('Report generation failed');-->
<!--                }-->
<!--            }).fail(function() {-->
<!--                addMessage('System', 'Error communicating with the server. Please try again.');-->
<!--                updateEmoji('ready');-->
<!--                $('#status-indicator').text('Report generation failed');-->
<!--            });-->
<!--        });-->
<!--    </script>-->
<!--</body>-->
<!--</html>-->






<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>AI HR Interview Assistant</title>-->
<!--    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>-->
<!--    <style>-->
<!--        body {-->
<!--            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;-->
<!--            background-color: #f0f2f5;-->
<!--            color: #333;-->
<!--            margin: 0;-->
<!--            padding: 0;-->
<!--            display: flex;-->
<!--            justify-content: center;-->
<!--            align-items: center;-->
<!--            min-height: 100vh;-->
<!--        }-->
<!--        .container {-->
<!--            background-color: #ffffff;-->
<!--            border-radius: 10px;-->
<!--            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);-->
<!--            padding: 30px;-->
<!--            width: 90%;-->
<!--            max-width: 800px;-->
<!--        }-->
<!--        h1 {-->
<!--            color: #333;-->
<!--            text-align: center;-->
<!--            margin-bottom: 20px;-->
<!--            font-size: 24px;-->
<!--        }-->
<!--        #emoji-container {-->
<!--            font-size: 60px;-->
<!--            text-align: center;-->
<!--            margin-bottom: 20px;-->
<!--            height: 80px;-->
<!--        }-->
<!--        #chat-container {-->
<!--            height: 300px;-->
<!--            overflow-y: auto;-->
<!--            padding: 20px;-->
<!--            background-color: #f9f9f9;-->
<!--            border-radius: 10px;-->
<!--            margin-bottom: 20px;-->
<!--        }-->
<!--        #user-input {-->
<!--            width: calc(100% - 22px);-->
<!--            padding: 12px;-->
<!--            margin-bottom: 10px;-->
<!--            border: 1px solid #ddd;-->
<!--            border-radius: 20px;-->
<!--            font-size: 14px;-->
<!--        }-->
<!--        button {-->
<!--            background-color: #007AFF;-->
<!--            color: white;-->
<!--            border: none;-->
<!--            padding: 10px 20px;-->
<!--            margin: 5px;-->
<!--            border-radius: 20px;-->
<!--            cursor: pointer;-->
<!--            transition: background-color 0.3s;-->
<!--            font-size: 14px;-->
<!--        }-->
<!--        button:hover {-->
<!--            background-color: #0056b3;-->
<!--        }-->
<!--        #upload-area {-->
<!--            margin-bottom: 20px;-->
<!--            text-align: center;-->
<!--        }-->
<!--        .message {-->
<!--            margin-bottom: 10px;-->
<!--            padding: 10px 15px;-->
<!--            border-radius: 18px;-->
<!--            max-width: 80%;-->
<!--            clear: both;-->
<!--        }-->
<!--        .user-message {-->
<!--            background-color: #007AFF;-->
<!--            color: white;-->
<!--            float: right;-->
<!--        }-->
<!--        .ai-message {-->
<!--            background-color: #E9E9EB;-->
<!--            color: #333;-->
<!--            float: left;-->
<!--        }-->
<!--        #status-indicator {-->
<!--            text-align: center;-->
<!--            margin-bottom: 15px;-->
<!--            font-size: 14px;-->
<!--            color: #666;-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->
<!--    <div class="container">-->
<!--        <h1>AI HR Interview Assistant</h1>-->
<!--        <div id="emoji-container">üë©‚Äçüíº</div>-->
<!--        <div id="status-indicator">AI Assistant is ready</div>-->
<!--        <div id="chat-container"></div>-->
<!--        <input type="text" id="user-input" placeholder="Type your message...">-->
<!--        <button id="send-message">Send</button>-->
<!--        <button id="voice-input">Voice Input</button>-->
<!--    </div>-->

<!--    <script>-->
<!--        let currentSessionId = '{{ session_id }}';-->
<!--        let currentJobTitle = '{{ job_title }}';-->

<!--        function updateEmoji(state) {-->
<!--            const emoji = document.getElementById('emoji-container');-->
<!--            switch(state) {-->
<!--                case 'ready':-->
<!--                    emoji.innerHTML = 'üë©‚Äçüíº';-->
<!--                    break;-->
<!--                case 'listening':-->
<!--                    emoji.innerHTML = 'üëÇ';-->
<!--                    break;-->
<!--                case 'thinking':-->
<!--                    emoji.innerHTML = 'ü§î';-->
<!--                    break;-->
<!--                case 'speaking':-->
<!--                    emoji.innerHTML = 'üó£Ô∏è';-->
<!--                    break;-->
<!--                default:-->
<!--                    emoji.innerHTML = 'üë©‚Äçüíº';-->
<!--            }-->
<!--        }-->

<!--        function addMessage(sender, message) {-->
<!--            const messageClass = sender === 'You' ? 'user-message' : 'ai-message';-->
<!--            $('#chat-container').append(`<div class="message ${messageClass}"><strong>${sender}:</strong> ${message}</div>`);-->
<!--            $('#chat-container').scrollTop($('#chat-container')[0].scrollHeight);-->
<!--        }-->

<!--        function playAudio(base64Audio) {-->
<!--            const audio = new Audio("data:audio/mp3;base64," + base64Audio);-->
<!--            audio.play();-->
<!--            updateEmoji('speaking');-->
<!--            $('#status-indicator').text('AI Assistant is speaking');-->

<!--            audio.onended = function() {-->
<!--                updateEmoji('ready');-->
<!--                $('#status-indicator').text('AI Assistant is ready');-->
<!--            };-->
<!--        }-->

<!--        $(document).ready(function() {-->
<!--            if (currentSessionId && currentJobTitle) {-->
<!--                startInterview(currentSessionId, currentJobTitle);-->
<!--            }-->
<!--        });-->

<!--        function startInterview(sessionId, jobTitle) {-->
<!--            $.post('/start_interview', { session_id: sessionId, job_title: jobTitle }, function(data) {-->
<!--                addMessage('AI', data.message);-->
<!--                if (data.audio) {-->
<!--                    playAudio(data.audio);-->
<!--                } else {-->
<!--                    updateEmoji('ready');-->
<!--                    $('#status-indicator').text('AI Assistant is ready');-->
<!--                }-->
<!--            }).fail(function() {-->
<!--                alert('Error starting interview');-->
<!--            });-->
<!--        }-->

<!--        $('#send-message').click(function() {-->
<!--            const message = $('#user-input').val();-->
<!--            if (message.trim() !== '') {-->
<!--                addMessage('You', message);-->
<!--                updateEmoji('thinking');-->
<!--                $('#status-indicator').text('AI Assistant is thinking...');-->
<!--                $.post('/send_message', {message: message, session_id: currentSessionId}, function(data) {-->
<!--                    addMessage('AI', data.message);-->
<!--                    if (data.audio) {-->
<!--                        playAudio(data.audio);-->
<!--                    } else {-->
<!--                        updateEmoji('ready');-->
<!--                        $('#status-indicator').text('AI Assistant is ready');-->
<!--                    }-->
<!--                    if (data.interview_completed) {-->
<!--                        $('#user-input').prop('disabled', true);-->
<!--                        $('#send-message').prop('disabled', true);-->
<!--                        $('#voice-input').prop('disabled', true);-->
<!--                        $('#status-indicator').text('Interview completed');-->
<!--                    }-->
<!--                });-->
<!--                $('#user-input').val('');-->
<!--            }-->
<!--        });-->

<!--        $('#user-input').keypress(function(e) {-->
<!--            if (e.which == 13) {-->
<!--                $('#send-message').click();-->
<!--            }-->
<!--        });-->

<!--        $('#voice-input').click(function() {-->
<!--            if ('webkitSpeechRecognition' in window) {-->
<!--                const recognition = new webkitSpeechRecognition();-->
<!--                recognition.lang = 'en-US';-->
<!--                recognition.start();-->
<!--                updateEmoji('listening');-->
<!--                $('#status-indicator').text('Listening...');-->

<!--                recognition.onresult = function(event) {-->
<!--                    const transcript = event.results[0][0].transcript;-->
<!--                    $('#user-input').val(transcript);-->
<!--                    updateEmoji('ready');-->
<!--                    $('#status-indicator').text('AI Assistant is ready');-->
<!--                };-->

<!--                recognition.onerror = function(event) {-->
<!--                    console.error('Speech recognition error', event.error);-->
<!--                    updateEmoji('ready');-->
<!--                    $('#status-indicator').text('Speech recognition error');-->
<!--                };-->
<!--            } else {-->
<!--                alert('Speech recognition is not supported in this browser.');-->
<!--            }-->
<!--        });-->
<!--    </script>-->
<!--</body>-->
<!--</html>-->



<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>AI HR Interview Assistant</title>-->
<!--    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>-->
<!--    <style>-->
<!--        body {-->
<!--            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;-->
<!--            background-color: #f0f2f5;-->
<!--            color: #333;-->
<!--            margin: 0;-->
<!--            padding: 0;-->
<!--            display: flex;-->
<!--            justify-content: center;-->
<!--            align-items: center;-->
<!--            min-height: 100vh;-->
<!--        }-->
<!--        .container {-->
<!--            background-color: #ffffff;-->
<!--            border-radius: 10px;-->
<!--            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);-->
<!--            padding: 30px;-->
<!--            width: 90%;-->
<!--            max-width: 800px;-->
<!--        }-->
<!--        h1, h2 {-->
<!--            color: #333;-->
<!--            text-align: center;-->
<!--            margin-bottom: 20px;-->
<!--        }-->
<!--        #emoji-container {-->
<!--            font-size: 60px;-->
<!--            text-align: center;-->
<!--            margin-bottom: 20px;-->
<!--            height: 80px;-->
<!--        }-->
<!--        #chat-container {-->
<!--            height: 300px;-->
<!--            overflow-y: auto;-->
<!--            padding: 20px;-->
<!--            background-color: #f9f9f9;-->
<!--            border-radius: 10px;-->
<!--            margin-bottom: 20px;-->
<!--        }-->
<!--        input[type="text"], input[type="email"], input[type="tel"], input[type="file"] {-->
<!--            width: calc(100% - 22px);-->
<!--            padding: 12px;-->
<!--            margin-bottom: 10px;-->
<!--            border: 1px solid #ddd;-->
<!--            border-radius: 20px;-->
<!--            font-size: 14px;-->
<!--        }-->
<!--        button {-->
<!--            background-color: #007AFF;-->
<!--            color: white;-->
<!--            border: none;-->
<!--            padding: 10px 20px;-->
<!--            margin: 5px;-->
<!--            border-radius: 20px;-->
<!--            cursor: pointer;-->
<!--            transition: background-color 0.3s;-->
<!--            font-size: 14px;-->
<!--        }-->
<!--        button:hover {-->
<!--            background-color: #0056b3;-->
<!--        }-->
<!--        #status-indicator {-->
<!--            text-align: center;-->
<!--            margin-bottom: 15px;-->
<!--            font-size: 14px;-->
<!--            color: #666;-->
<!--        }-->
<!--        .message {-->
<!--            margin-bottom: 10px;-->
<!--            padding: 10px 15px;-->
<!--            border-radius: 18px;-->
<!--            max-width: 80%;-->
<!--            clear: both;-->
<!--        }-->
<!--        .user-message {-->
<!--            background-color: #007AFF;-->
<!--            color: white;-->
<!--            float: right;-->
<!--        }-->
<!--        .ai-message {-->
<!--            background-color: #E9E9EB;-->
<!--            color: #333;-->
<!--            float: left;-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->
<!--    <div class="container">-->
<!--        <h1>AI HR Interview Assistant</h1>-->
<!--        <div id="emoji-container">üë©‚Äçüíº</div>-->
<!--        <div id="status-indicator">Please register to start the interview</div>-->
<!--        <div id="registration-form">-->
<!--            <h2>Candidate Registration</h2>-->
<!--            <form id="candidate-form">-->
<!--                <input type="text" id="full-name" placeholder="Full Name" required>-->
<!--                <input type="email" id="email" placeholder="Email" required>-->
<!--                <input type="tel" id="phone" placeholder="Phone (optional)">-->
<!--                <input type="hidden" id="job-title" value="{{ job_title }}">-->
<!--                <input type="file" id="cv-file" accept=".pdf" required>-->
<!--                <button type="submit">Register and Start Interview</button>-->
<!--            </form>-->
<!--        </div>-->
<!--        <div id="interview-area" style="display: none;">-->
<!--            <div id="chat-container"></div>-->
<!--            <input type="text" id="user-input" placeholder="Type your message...">-->
<!--            <button id="send-message">Send</button>-->
<!--            <button id="voice-input">Voice Input</button>-->
<!--        </div>-->
<!--    </div>-->

<!--    <script>-->
<!--        let currentSessionId = '{{ session_id }}';-->
<!--        let currentJobTitle = '{{ job_title }}';-->
<!--        let currentCandidateId = '{{ candidate_id }}';-->

<!--        function updateEmoji(state) {-->
<!--            const emoji = document.getElementById('emoji-container');-->
<!--            switch(state) {-->
<!--                case 'ready':-->
<!--                    emoji.innerHTML = 'üë©‚Äçüíº';-->
<!--                    break;-->
<!--                case 'listening':-->
<!--                    emoji.innerHTML = 'üëÇ';-->
<!--                    break;-->
<!--                case 'thinking':-->
<!--                    emoji.innerHTML = 'ü§î';-->
<!--                    break;-->
<!--                case 'speaking':-->
<!--                    emoji.innerHTML = 'üó£Ô∏è';-->
<!--                    break;-->
<!--                default:-->
<!--                    emoji.innerHTML = 'üë©‚Äçüíº';-->
<!--            }-->
<!--        }-->

<!--        function addMessage(sender, message) {-->
<!--            const messageClass = sender === 'You' ? 'user-message' : 'ai-message';-->
<!--            $('#chat-container').append(`<div class="message ${messageClass}"><strong>${sender}:</strong> ${message}</div>`);-->
<!--            $('#chat-container').scrollTop($('#chat-container')[0].scrollHeight);-->
<!--        }-->

<!--        function playAudio(base64Audio) {-->
<!--            const audio = new Audio("data:audio/mp3;base64," + base64Audio);-->
<!--            audio.play();-->
<!--            updateEmoji('speaking');-->
<!--            $('#status-indicator').text('AI Assistant is speaking');-->

<!--            audio.onended = function() {-->
<!--                updateEmoji('ready');-->
<!--                $('#status-indicator').text('AI Assistant is ready');-->
<!--            };-->
<!--        }-->

<!--        $('#candidate-form').submit(function(e) {-->
<!--            e.preventDefault();-->
<!--            const formData = new FormData();-->
<!--            formData.append('full_name', $('#full-name').val());-->
<!--            formData.append('email', $('#email').val());-->
<!--            formData.append('phone', $('#phone').val());-->
<!--            formData.append('job_title', $('#job-title').val());-->
<!--            formData.append('cv', $('#cv-file')[0].files[0]);-->

<!--            $.ajax({-->
<!--                url: '/register_candidate',-->
<!--                type: 'POST',-->
<!--                data: formData,-->
<!--                processData: false,-->
<!--                contentType: false,-->
<!--                success: function(data) {-->
<!--                    currentSessionId = data.session_id;-->
<!--                    currentCandidateId = data.candidate_id;-->
<!--                    $('#registration-form').hide();-->
<!--                    $('#interview-area').show();-->
<!--                    startInterview();-->
<!--                },-->
<!--                error: function(jqXHR, textStatus, errorThrown) {-->
<!--                    let errorMessage = 'Error registering candidate';-->
<!--                    if (jqXHR.responseJSON && jqXHR.responseJSON.error) {-->
<!--                        errorMessage = jqXHR.responseJSON.error;-->
<!--                    }-->
<!--                    alert(errorMessage);-->
<!--                    console.error('Registration error:', errorMessage);-->
<!--                }-->
<!--            });-->
<!--        });-->

<!--        function startInterview() {-->
<!--            updateEmoji('thinking');-->
<!--            $('#status-indicator').text('Starting interview...');-->
<!--            $.post('/start_interview', {-->
<!--                session_id: currentSessionId,-->
<!--                job_title: currentJobTitle,-->
<!--                candidate_id: currentCandidateId-->
<!--            }, function(data) {-->
<!--                addMessage('AI', data.message);-->
<!--                if (data.audio) {-->
<!--                    playAudio(data.audio);-->
<!--                } else {-->
<!--                    updateEmoji('ready');-->
<!--                    $('#status-indicator').text('AI Assistant is ready');-->
<!--                }-->
<!--            }).fail(function() {-->
<!--                alert('Error starting interview');-->
<!--            });-->
<!--        }-->

<!--        $('#send-message').click(function() {-->
<!--            const message = $('#user-input').val();-->
<!--            if (message.trim() !== '') {-->
<!--                addMessage('You', message);-->
<!--                updateEmoji('thinking');-->
<!--                $('#status-indicator').text('AI Assistant is thinking...');-->
<!--                $.post('/send_message', {-->
<!--                    message: message,-->
<!--                    session_id: currentSessionId-->
<!--                }, function(data) {-->
<!--                    addMessage('AI', data.message);-->
<!--                    if (data.audio) {-->
<!--                        playAudio(data.audio);-->
<!--                    } else {-->
<!--                        updateEmoji('ready');-->
<!--                        $('#status-indicator').text('AI Assistant is ready');-->
<!--                    }-->
<!--                    if (data.interview_completed) {-->
<!--                        $('#user-input').prop('disabled', true);-->
<!--                        $('#send-message').prop('disabled', true);-->
<!--                        $('#voice-input').prop('disabled', true);-->
<!--                        $('#status-indicator').text('Interview completed');-->
<!--                    }-->
<!--                });-->
<!--                $('#user-input').val('');-->
<!--            }-->
<!--        });-->

<!--        $('#user-input').keypress(function(e) {-->
<!--            if (e.which == 13) {-->
<!--                $('#send-message').click();-->
<!--            }-->
<!--        });-->

<!--        $('#voice-input').click(function() {-->
<!--            if ('webkitSpeechRecognition' in window) {-->
<!--                const recognition = new webkitSpeechRecognition();-->
<!--                recognition.lang = 'en-US';-->
<!--                recognition.start();-->
<!--                updateEmoji('listening');-->
<!--                $('#status-indicator').text('Listening...');-->

<!--                recognition.onresult = function(event) {-->
<!--                    const transcript = event.results[0][0].transcript;-->
<!--                    $('#user-input').val(transcript);-->
<!--                    updateEmoji('ready');-->
<!--                    $('#status-indicator').text('AI Assistant is ready');-->
<!--                };-->

<!--                recognition.onerror = function(event) {-->
<!--                    console.error('Speech recognition error', event.error);-->
<!--                    updateEmoji('ready');-->
<!--                    $('#status-indicator').text('Speech recognition error');-->
<!--                };-->
<!--            } else {-->
<!--                alert('Speech recognition is not supported in this browser.');-->
<!--            }-->
<!--        });-->
<!--    </script>-->
<!--</body>-->
<!--</html>-->







